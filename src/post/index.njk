---
layout: layouts/page.njk
pagination:
  data: collections.posts
  size: 10
  alias: pagedPosts
  reverse: true
permalink: /post/{% if pagination.pageNumber > 0 %}page/{{ pagination.pageNumber + 1 }}/{% endif %}index.html
eleventyComputed:
  title: "{% if pagination.pageNumber > 0 %}Posts · Page {{ pagination.pageNumber + 1 }}{% else %}Posts{% endif %}"
---

{% set totalPosts = collections.posts | length %}
{% set startIndex = pagination.pageNumber * pagination.size + 1 %}
{% set endIndex = startIndex + (pagedPosts.length or 0) - 1 %}

<section class="list blog-index">
  <header class="list-header">
    <h1>Posts</h1>
    <p class="list-count">
      Showing {{ startIndex }}–{{ endIndex }} of {{ totalPosts }}
    </p>
  </header>

  {% if pagedPosts and pagedPosts.length %}
  <ul class="post-list post-list--stacked">
    {% for post in pagedPosts %}
    <li>
      <span class="post-meta">{{ post.date | readableDate }}</span>
      <a href="{{ post.url }}">{{ post.data.title or "Untitled post" }}</a>
    </li>
    {% endfor %}
  </ul>
  {% else %}
  <p>No posts available.</p>
  {% endif %}

  {% if pagination.href.previous or pagination.href.next %}
  <nav class="pager" aria-label="Pagination">
    {% if pagination.href.previous %}
    <a class="pager-link" href="{{ pagination.href.previous }}">← Newer posts</a>
    {% else %}
    <span class="pager-link pager-link--disabled">← Newer posts</span>
    {% endif %}

    <span class="pager-separator">·</span>
    <span class="pager-current">Page {{ pagination.pageNumber + 1 }} of {{ pagination.pages.length }}</span>

    <span class="pager-separator">·</span>

    {% if pagination.href.next %}
    <a class="pager-link" href="{{ pagination.href.next }}">Older posts →</a>
    {% else %}
    <span class="pager-link pager-link--disabled">Older posts →</span>
    {% endif %}
  </nav>
  {% endif %}
</section>
